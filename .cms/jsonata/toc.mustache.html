(
  $addContents := function($node) {

$node.{"type":type,
"name":name,
            "time":time,
            "info":info?info:"",
             "contents":type = "file"?[]:contents.$addContents($)}
  };

$.$addContents($);

$subtree := function($node)<o:o>{
  $node.{
  "type":type,
  "name":name,
  "time":time,
  "info":contents[$contains(name,"index")].info,
  "contents":contents[type="directory"] ?
                      contents[type="directory"].$subtree($):
                      []}
  };

$.$subtree($)

)
